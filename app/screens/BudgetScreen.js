/**
 * Displays tiered grocery budget plans with curated ingredient lists and educational links.
 *
 * Each budget level ($25, $50, $75, $100, $125) presents a scrollable list of ingredients designed to support healthy eating.
 * Many items link to Chef Cathy Zeis's website for nutritional insights, and the screen includes a clickable image of her book
 * that redirects to its Amazon page. The layout is styled for clarity and accessibility, with consistent formatting across tiers.
 *
 * This component promotes affordable, nutrient-rich meal planning and includes tips for child nutrition (e.g., whole milk guidance).
 * It uses React Native's ScrollView for vertical navigation and applies custom styles for headers, links, and layout.
 *
 * Generated by Copilot AI
 */

import React from "react";
import {
  StyleSheet,
  View,
  Dimensions,
  TouchableOpacity,
} from "react-native";
import { MaterialCommunityIcons } from "@expo/vector-icons";
import AppText from "../components/AppText";
import Screen from "../components/Screen";
import AppButton from "../components/AppButton";
import colors from "../config/colors";
import { budgets } from "../config/budgets";

const { width, height } = Dimensions.get("window");

function BudgetScreen({ navigation }) {
  return (
    <Screen style={styles.container}>
      {/* Header */}
      <View style={styles.headerContainer}>
        <AppText style={styles.title}>Budget</AppText>
        <View style={styles.line} />
        <AppText style={styles.subtitle}>
          Did you know, 90% of everything in grocery stores is marketing, and only
          10% is taste?
        </AppText>
      </View>

      {/* Buttons */}
      <View style={styles.buttonContainer}>
        <AppButton
          title="Budgeting Basics"
          onPress={() => navigation.navigate("BudgetingBasics")}
          color="eltrred"
          style={styles.customButton}
          showArrow
          textStyle={{ fontWeight: "600", fontSize: width * 0.05, textTransform: "none", }}
        />
        {budgets.map((budget) => (
          <AppButton
            key={budget.id}
            title={`${budget.id} Sample`}
            onPress={() => 
              navigation.navigate("SampleBudget", {
                budgetId: budget.id,
              })
            }
            color={budget.color}
            style={styles.customButton}
            leftAlign
            showArrow
            textStyle={{ fontWeight: "300", fontSize: width * 0.07, textTransform: "none", }}
          />
        ))}
        <AppButton
          title="Stores & Sales"
          onPress={() => navigation.navigate("StoresSales")}
          color="eltrblue"
          style={styles.customButton}
          showArrow
          textStyle={{ fontWeight: "600", fontSize: width * 0.05, textTransform: "none", }}
        />
      </View>

      {/* Chatbot Button */}
      <TouchableOpacity
        style={styles.chatbotButton}
        onPress={() => navigation.navigate("ChatBot")}
      >
        <AppText style={styles.chatbotText}>
          Still need help?{"\n"}Use this AI chat to build a personalized budget!
        </AppText>
        <View style={styles.chatIconCircle}>
          <MaterialCommunityIcons name="chat" size={40} color={colors.white} />
        </View>
      </TouchableOpacity>
    </Screen>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: "flex-start", // evenly space header, buttons, and chatbot button
    alignItems: "center",
    backgroundColor: colors.light,
    paddingHorizontal: width * 0.04,
    paddingVertical: height * 0.08,
    paddingTop: height * 0.0,
  },
  headerContainer: {
    alignItems: "center",
  },
  title: {
    color: colors.black,
    fontWeight: "bold",
    fontSize: width * 0.09,
    textAlign: "center",
  },
  line: {
    width: width * 0.5,
    height: 2,
    backgroundColor: colors.medium,
    marginVertical: 8,
  },
  subtitle: {
    fontStyle: "italic",
    fontSize: width * 0.04,
    textAlign: "center",
    color: colors.medium,
    marginBottom: 10,
  },
  buttonContainer: {
    width: "100%",
    alignItems: "center",
    flexGrow: 1,
    padding: 1,
  },
  customButton: {
    height: height * 0.06,
    borderRadius: 15,
    marginVertical: 3,
    padding: 1,
  },
  chatbotButton: {
    width: "95%",
    backgroundColor: colors.white,
    borderRadius: 12,
    flexDirection: "row",
    justifyContent: "space-between",
    alignItems: "center",
    padding: width * 0.03,
    marginTop: height * 0.02,
    // iOS Shadow properties
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 2 },
    shadowOpacity: 0.2,
    shadowRadius: 3,
    // Android Elevation property
    elevation: 3,
  },
  chatbotText: {
    flex: 1,
    color: colors.dark,
    fontSize: width * 0.045,
  },
  chatIconCircle: {
    width: 80,
    height: 80,
    borderRadius: 40,
    backgroundColor: colors.eltrblue,
    justifyContent: "center",
    alignItems: "center",
    marginLeft: 10,
    borderColor: colors.eltrdarkblue,
    borderWidth: 1,
  },
});

export default BudgetScreen;