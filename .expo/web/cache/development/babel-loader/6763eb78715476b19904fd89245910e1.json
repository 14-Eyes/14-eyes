{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _StyleSheet = _interopRequireDefault(require(\"react-native-web/dist/exports/StyleSheet\"));\n\nvar _View = _interopRequireDefault(require(\"react-native-web/dist/exports/View\"));\n\nvar _Image = _interopRequireDefault(require(\"react-native-web/dist/exports/Image\"));\n\nvar _ScrollView = _interopRequireDefault(require(\"react-native-web/dist/exports/ScrollView\"));\n\nvar _index = require(\"react-native-web/dist/index\");\n\nvar _Screen = _interopRequireDefault(require(\"../components/Screen\"));\n\nvar _AppText = _interopRequireDefault(require(\"../components/AppText\"));\n\nvar _colors = _interopRequireDefault(require(\"../config/colors\"));\n\nvar _check = _interopRequireDefault(require(\"../utility/check\"));\n\nvar _AccountAllergies = _interopRequireDefault(require(\"../screens/AccountAllergies\"));\n\nvar _AccountConditions = _interopRequireDefault(require(\"../screens/AccountConditions\"));\n\nvar _ScanNavigator = _interopRequireDefault(require(\"../navigation/ScanNavigator\"));\n\nvar _jsxFileName = \"C:\\\\Users\\\\Mason\\\\ELTRFront\\\\app\\\\screens\\\\FoodDetails.js\";\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction add_picY() {\n  var pic = document.createElement('pic');\n  pic.src = \"C:Usersojj05ELTRFrontappassets\\thumbs-up\";\n  document.getElementById('body').appendChild(pic);\n}\n\nfunction add_picN() {\n  var pic = document.createElement('pic');\n  pic.src = \"C:Usersojj05ELTRFrontappassets\\thumbs-down\";\n  document.getElementById('body').appendChild(pic);\n}\n\nfunction FoodDetails(_ref) {\n  var route = _ref.route;\n\n  var _useState = (0, _react.useState)(null),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      allergic = _useState2[0],\n      setAllergic = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(null),\n      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n      condition = _useState4[0],\n      setCondition = _useState4[1];\n\n  var food = route.params;\n  var status = food.status;\n  var image = false;\n  var traces = false;\n\n  if (food.status) {\n    image = food.product.image_small_url;\n    traces = food.product.traces;\n    (0, _react.useEffect)(function () {\n      checkAllergies();\n      checkConditions();\n    }, []);\n  }\n\n  var checkAllergies = function checkAllergies() {\n    var allergic;\n    return _regenerator.default.async(function checkAllergies$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regenerator.default.awrap(_check.default.checkAllergens(food.product.ingredients_text, food.product.traces));\n\n          case 2:\n            allergic = _context.sent;\n            setAllergic(allergic);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var checkConditions = function checkConditions() {\n    var condition;\n    return _regenerator.default.async(function checkConditions$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regenerator.default.awrap(_check.default.checkConditions(food.product.nutriments));\n\n          case 2:\n            condition = _context2.sent;\n            setCondition(condition);\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var allergyText = \"Warning! This product contains the allergens: \";\n  var conditionText = \"Warning! This product contains which may conflict with your medication or condition: \";\n\n  function addToList(value) {\n    if (allergens.includes(value)) {\n      allergyText += \",\";\n      allergyText += value;\n      console.log(value);\n    }\n  }\n\n  try {\n    var ingredientArr = ingredients.split(/[\\s, ]+/);\n    ingredientArr.forEach(function (ingredient) {\n      if (allergens.includes(ingredient)) {\n        allergyText += \",\";\n        allergyText += ingredient;\n        console.log(ingredient);\n      }\n    });\n  } catch (err) {\n    var ingredientArr = \"No Ingredients\";\n  }\n\n  var RetrieveAllergens = function RetrieveAllergens() {\n    var retAll, message;\n    return _regenerator.default.async(function RetrieveAllergens$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            _context3.next = 3;\n            return _regenerator.default.awrap(_index.AsyncStorage.getItem('retALL'));\n\n          case 3:\n            retAll = _context3.sent;\n            _context3.next = 9;\n            break;\n\n          case 6:\n            _context3.prev = 6;\n            _context3.t0 = _context3[\"catch\"](0);\n            message = \"We have no information on your allergies or health conditions.\";\n\n          case 9:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, [[0, 6]], Promise);\n  };\n\n  for (var i = 0; i < ingredientArr.length; i++) {\n    var obj = ingredientArr[i];\n\n    for (var x = 0; x < allergens.length; x++) {\n      if (obj == allergens[x]) {\n        allergyText += \",\";\n        allergyText += obj;\n      }\n    }\n  }\n\n  for (var y = 0; y < conditions.length; y++) {\n    if (obj == conditions[y]) {\n      conditionText += \",\";\n      conditionText += obj;\n    }\n  }\n\n  allergyText += \".\";\n  conditionText += \".\";\n\n  if (allergyText.length < 49) {\n    allergyText = \"\";\n  }\n\n  return _react.default.createElement(_ScrollView.default, {\n    style: styles.scroll,\n    __self: this,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 5\n    }\n  }, _react.default.createElement(_Screen.default, {\n    style: styles.foodContainer,\n    __self: this,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }\n  }, image ? _react.default.createElement(_Image.default, {\n    source: {\n      uri: food.product.image_small_url\n    },\n    style: {\n      height: 250,\n      width: 250,\n      borderColor: _colors.default.primary,\n      borderWidth: 8,\n      marginBottom: 20\n    },\n    __self: this,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 11\n    }\n  }) : _react.default.createElement(_AppText.default, {\n    style: styles.noImage,\n    __self: this,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 11\n    }\n  }, \"Sorry, we couldn't find an image for this product.\"), _react.default.createElement(_View.default, {\n    style: styles.foodInfo,\n    __self: this,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }\n  }, status ? _react.default.createElement(_AppText.default, {\n    style: styles.Name,\n    __self: this,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 13\n    }\n  }, food.product.product_name) : _react.default.createElement(_AppText.default, {\n    __self: this,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 13\n    }\n  }, \"Sorry, we can't find that item!\"), allergic ? _react.default.createElement(_react.default.Fragment, null, _react.default.createElement(_AppText.default, {\n    style: styles.Warn,\n    __self: this,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 15\n    }\n  }, \"Warning! You are allergic to the following ingredients in this food:\"), _react.default.createElement(_AppText.default, {\n    __self: this,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 15\n    }\n  }, allergic)) : null, condition ? _react.default.createElement(_react.default.Fragment, null, _react.default.createElement(_AppText.default, {\n    style: styles.Warn,\n    __self: this,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 15\n    }\n  }, condition)) : null, status && food.product.ingredients_text ? _react.default.createElement(_react.default.Fragment, null, _react.default.createElement(_AppText.default, {\n    style: styles.Warn,\n    __self: this,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 15\n    }\n  }, \"Ingredients: \"), _react.default.createElement(_AppText.default, {\n    __self: this,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 15\n    }\n  }, food.product.ingredients_text)) : null, traces ? _react.default.createElement(_react.default.Fragment, null, _react.default.createElement(_AppText.default, {\n    style: styles.Warn,\n    __self: this,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 15\n    }\n  }, \"May also contain traces of:\"), _react.default.createElement(_AppText.default, {\n    style: styles.text,\n    __self: this,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 15\n    }\n  }, food.product.traces, \".\")) : null)));\n}\n\nvar styles = _StyleSheet.default.create({\n  scroll: {\n    backgroundColor: _colors.default.light\n  },\n  foodContainer: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    backgroundColor: _colors.default.light\n  },\n  foodInfo: {\n    padding: 15\n  },\n  Name: {\n    fontSize: 25,\n    fontWeight: \"bold\",\n    color: _colors.default.primary\n  },\n  Warn: {\n    fontSize: 20,\n    fontWeight: \"bold\",\n    color: _colors.default.eltrred\n  },\n  text: {\n    fontSize: 18,\n    paddingBottom: 20\n  },\n  noImage: {\n    fontSize: 12,\n    color: _colors.default.eltrgreen\n  }\n});\n\nvar _default = FoodDetails;\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/Mason/ELTRFront/app/screens/FoodDetails.js"],"names":["add_picY","pic","document","createElement","src","getElementById","appendChild","add_picN","FoodDetails","route","allergic","setAllergic","condition","setCondition","food","params","status","image","traces","product","image_small_url","checkAllergies","checkConditions","check","checkAllergens","ingredients_text","nutriments","allergyText","conditionText","addToList","value","allergens","includes","console","log","ingredientArr","ingredients","split","forEach","ingredient","err","RetrieveAllergens","AsyncStorage","getItem","retAll","message","i","length","obj","x","y","conditions","styles","scroll","foodContainer","uri","height","width","borderColor","colors","primary","borderWidth","marginBottom","noImage","foodInfo","Name","product_name","Warn","text","StyleSheet","create","backgroundColor","light","flex","alignItems","justifyContent","padding","fontSize","fontWeight","color","eltrred","paddingBottom","eltrgreen"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { StyleSheet, View, Image, ScrollView } from \"react-native\";\r\nimport { AsyncStorage } from \"react-native\";\r\n\r\nimport Screen from \"../components/Screen\";\r\nimport AppText from \"../components/AppText\";\r\nimport colors from \"../config/colors\";\r\nimport check from \"../utility/check\";\r\nimport AccountAllergies from \"../screens/AccountAllergies\"; //\r\nimport AccountConditions from \"../screens/AccountConditions\"; //\r\nimport ScanNavigator from \"../navigation/ScanNavigator\"; //\r\n\r\nfunction add_picY() { //\r\n\tvar pic = document.createElement('pic'); \r\n    \tpic.src = 'C:\\Users\\ojj05\\ELTRFront\\app\\assets\\thumbs-up'; \r\n\tdocument.getElementById('body').appendChild(pic);\r\n}\r\n\r\nfunction add_picN() { //\r\n\tvar pic = document.createElement('pic'); \r\n    \tpic.src = 'C:\\Users\\ojj05\\ELTRFront\\app\\assets\\thumbs-down'; \r\n\tdocument.getElementById('body').appendChild(pic);\r\n}\r\n\r\nfunction FoodDetails({ route }) {\r\n  const [allergic, setAllergic] = useState(null);\r\n  const [condition, setCondition] = useState(null);\r\n  const food = route.params;\r\n  const status = food.status;\r\n  let image = false;\r\n  let traces = false;\r\n\r\n  if (food.status) {\r\n    image = food.product.image_small_url;\r\n    traces = food.product.traces;\r\n\r\n    useEffect(() => {\t// The specified function will only run at certain time\r\n      checkAllergies();\r\n      checkConditions();\r\n    }, []);\t// useEffect fetches data when the component mounts.\r\n  }\r\n  const checkAllergies = async () => {\t//async function makes callback function return a promise\r\n    const allergic = await check.checkAllergens(\t//resolves promise\r\n      food.product.ingredients_text,\r\n      food.product.traces\r\n    );\r\n    setAllergic(allergic);\r\n  };\r\n\r\n  const checkConditions = async () => {\t//async function makes callback function return a promise\r\n    const condition = await check.checkConditions(food.product.nutriments);\t//resolves promise\r\n    setCondition(condition);\r\n  };\r\n\r\n  /*When a user scans an item, the following should happen in regards to ALLERGIES:\r\n  1. retrieve the ingredient list from the item (done)\r\n  2. retrieve the user's allergies from asyncstorage (done)???\r\n  3. check if any ingredients in the item match a user's allergies THIS SHOULD BE CASE INSENSITIVE\r\n  4. If there is a match, tell the user DO NOT EAT THIS*/\r\n\r\n   //alert messages\r\n    var allergyText = \"Warning! This product contains the allergens: \";\r\n    var conditionText = \"Warning! This product contains which may conflict with your medication or condition: \";\r\n\r\n    function addToList(value){\r\n      if(allergens.includes(value)){\r\n        allergyText += \",\";\r\n        allergyText += value;\r\n        console.log(value)\r\n        }\r\n      }\r\n\r\n  //Goes through the ingredients.\r\n    try {\r\n    var ingredientArr = ingredients.split(/[\\s, ]+/);\r\n        ingredientArr.forEach(function (ingredient) {\r\n          if(allergens.includes(ingredient)){\r\n            allergyText += \",\";\r\n            allergyText += ingredient;\r\n            console.log(ingredient);\r\n            }\r\n        });\r\n    }\r\n    \r\n    catch(err){\t//catches error if there aren't any ingrediants\r\n      var ingredientArr = \"No Ingredients\";\r\n    }\r\n\r\n// -------------------------------------------\r\n// Retrieving allergens from asyncstorage\r\n  const RetrieveAllergens = async () => {\r\n  \ttry{\r\n\t\tconst retAll = await AsyncStorage.getItem('retALL');\r\n\t}\r\n\tcatch(err){\r\n\t\tvar message = \"We have no information on your allergies or health conditions.\";\r\n\t}\r\n}\r\n// ----------------------------------------------\r\n\r\n// loops through the item's ingredients\r\n  for (var i = 0; i < ingredientArr.length; i++){\r\n    var obj = ingredientArr[i];\r\n    for (var x = 0 ; x < allergens.length; x++){   //and the user's allergies??\r\n\t  \r\n      //compare allergies\r\n      if (obj == (allergens[x])){\r\n          //add\r\n\t      allergyText += \",\";\r\n\t      allergyText += obj; //add allergen to product warning text\r\n\t    }\r\n    }\r\n  }\r\n\r\n/* -------------------------------------------------\r\nDon't know where these functions go at the moment...\r\n\t\tadd_picY();\r\n\t\tadd_picN();\r\n--------------------------------------------------*/\r\n\r\n// compare CONDITIONS\r\n    for (var y = 0 ; y < conditions.length; y++){\r\n      //compares conditions\r\n \r\n\tif (obj == (conditions[y])){\r\n\t  //add\r\n\t  conditionText += \",\";\r\n\t  conditionText += obj;\r\n\t  }\r\n        }\r\n/*    for (var z = 0 ; z < (tips array); z++){\r\n         //compare/output?\r\n      }\r\n    }\r\n  }*/\r\n  \r\n// ends alert messages with period\r\n  allergyText += \".\";\r\n  conditionText += \".\";\r\n  \r\n  if (allergyText.length < 49) {\r\n    allergyText = \"\";\r\n  }\r\n\r\n// what's showing on the screen\r\n  return (\r\n    <ScrollView style={styles.scroll}>\r\n      <Screen style={styles.foodContainer}>\r\n        {image ? (\r\n          <Image\r\n            source={{ uri: food.product.image_small_url }}\r\n            style={{\r\n              height: 250,\r\n              width: 250,\r\n              borderColor: colors.primary,\r\n              borderWidth: 8,\r\n              marginBottom: 20,\r\n            }}\r\n          />\r\n        ) : (\r\n          <AppText style={styles.noImage}>\r\n            Sorry, we couldn't find an image for this product.\r\n          </AppText>\r\n        )}\r\n\r\n        <View style={styles.foodInfo}>\r\n          {status ? (\r\n            <AppText style={styles.Name}>{food.product.product_name}</AppText>\r\n          ) : (\r\n            <AppText>Sorry, we can't find that item!</AppText>\r\n          )}\r\n          {allergic ? (\r\n            <>\r\n              <AppText style={styles.Warn}>\r\n                Warning! You are allergic to the following ingredients in this\r\n                food:\r\n              </AppText>\r\n              <AppText>{allergic}</AppText>\r\n            </>\r\n          ) : null}\r\n          {condition ? (\r\n            <>\r\n              <AppText style={styles.Warn}>{condition}</AppText>\r\n            </>\r\n          ) : null}\r\n          {status && food.product.ingredients_text ? (\r\n            <>\r\n              <AppText style={styles.Warn}>Ingredients: </AppText>\r\n              <AppText>{food.product.ingredients_text}</AppText>\r\n            </>\r\n          ) : null}\r\n          {traces ? (\r\n            <>\r\n              <AppText style={styles.Warn}>May also contain traces of:</AppText>\r\n              <AppText style={styles.text}>{food.product.traces}.</AppText>\r\n            </>\r\n          ) : null}\r\n        </View>\r\n      </Screen>\r\n    </ScrollView>\r\n  );\r\n}\r\n// How content is being displayed\r\nconst styles = StyleSheet.create({\r\n  scroll: {\r\n    backgroundColor: colors.light,\r\n  },\r\n  foodContainer: {\r\n    flex: 1,\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    backgroundColor: colors.light,\r\n  },\r\n  foodInfo: {\r\n    padding: 15,\r\n  },\r\n  Name: {\r\n    fontSize: 25,\r\n    fontWeight: \"bold\",\r\n    color: colors.primary,\r\n  },\r\n  Warn: {\r\n    fontSize: 20,\r\n    fontWeight: \"bold\",\r\n    color: colors.eltrred,\r\n  },\r\n  text: {\r\n    fontSize: 18,\r\n    paddingBottom: 20,\r\n  },\r\n  noImage: {\r\n    fontSize: 12,\r\n    color: colors.eltrgreen,\r\n  },\r\n});\r\n\r\nexport default FoodDetails;\r\n"]},"metadata":{},"sourceType":"script"}